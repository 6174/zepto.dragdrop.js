(function(e){"use strict";function n(t,n){var r=e.touchable?"touchstart":"mousedown";this.el=t,this.opts=n||{},this.ctx=this.opts.context||this.el,this.opts.selector?this.el.on(r,this.opts.selector,e.proxy(this.start,this)):this.el.on(r,e.proxy(this.start,this))}var t;n.prototype={constructor:n,start:function(n){var r,i;return t||(this.curEl=e(n.target),r=this.curEl.offset(),this.curEl.data(r),this.setRevert(r),this.setZIndex(1),e(this.ctx).trigger("draggable:start",[n,this.curEl]),this.opts.start&&this.opts.start.call(this.ctx,this.curEl),t=this),!1},stop:function(n){return t&&(n.el=this.curEl,this.setZIndex(-1),e(this.ctx).trigger("draggable:end",[n,this.curEl]),this.opts.stop&&this.opts.stop.call(this.ctx,this.curEl),t=null),!1},drag:function(t){var n=e.getPos(t);return this.setPosition(n.x,n.y),this.opts.drag&&this.opts.drag.call(this.ctx,this.curEl),!1},setPosition:function(e,t){var n=this.curEl.height(),r=this.curEl.width(),i=this.findOffset(),s=e-r/i,o=t-n/i;this.curEl.css({left:s,top:o})},setRevert:function(e){this.opts.revert&&!this.curEl.data("revert")&&this.curEl.data({rtop:e.top,rleft:e.left,revert:this.opts.revert})},findOffset:function(){var e=this.curEl.data("width"),t=this.curEl.width();return e>t?2*e/t:2*t/e},setZIndex:function(e){var t=parseInt(this.curEl.css("z-index"),10);this.curEl.css("z-index",t+e)}},e.fn.draggable=function(t){return this.each(function(){var r=e(this),i=r.data("draggable");i||(i=new n(r,t),r.data("draggable",i))})},e(function(){e(document).on("mousemove touchmove mouseup touchend",function(e){if(!t)return;switch(e.type){case"mousemove":case"touchmove":t.drag(e);break;case"mouseup":case"touchend":t.stop(e)}})})})(Zepto),function(e){"use strict";function t(e,t){this.el=e,this.opts=t||{},this.ctx=this.opts.context||this.el}function n(n){var r,i,s,o;return n.el&&(i=e.getPos(n),s=n.el,s.css({display:"none"}),o=e.elementFromPoint(i.x,i.y),s.css({display:"block"}),r=e(o).data("droppable"),r?r.drop(n):s.data("revert")&&t.prototype.revert(s)),!1}t.prototype.drop=function(t){var n=!0,r=t.el;this.opts.selector&&!this.el.hasClass(this.opts.selector)&&(n=!1),n&&this.opts.drop&&(n&=this.opts.drop.call(this.ctx,t,r,this.el)),n&&e(this.ctx).trigger("droppable:drop",[t,r,this.el]),!n&&r.data("revert")&&this.revert(r)},t.prototype.revert=function(t){var n=t.data("rleft"),r=t.data("rtop"),i=t.data("revert");e.isFunction(i)&&i.call(t),t.css({left:n,top:r})},e.fn.droppable=function(n){return this.each(function(){var r=e(this),i=r.data("droppable");i||(i=new t(r,n),r.data("droppable",i))})},e(function(){e(document).on("mouseup touchend",n)})}(Zepto),function(e){function s(s,u){var a=s[i],f=a&&t[a];if(u===undefined)return f||o(s);if(f){if(u in f)return f[u];var l=r(u);if(l in f)return f[l]}return n.call(e(s),u)}function o(n,s,o){var a=n[i]||(n[i]=++e.uuid),f=t[a]||(t[a]=u(n));return s!==undefined&&(f[r(s)]=o),f}function u(t){var n={};return e.each(t.attributes,function(e,t){t.name.indexOf("data-")===0&&(n[r(t.name.replace("data-",""))]=t.value)}),n}var t={},n=e.fn.data,r=e.zepto.camelize,i=e.expando="Zepto"+ +(new Date);e.fn.data=function(t,n){return n===undefined?e.isPlainObject(t)?this.each(function(n,r){e.each(t,function(e,t){o(r,e,t)})}):this.length===0?undefined:s(this[0],t):this.each(function(){o(this,t,n)})},e.fn.removeData=function(n){return typeof n=="string"&&(n=n.split(/\s+/)),this.each(function(){var s=this[i],o=s&&t[s];o&&e.each(n,function(){delete o[r(this)]})})}}(Zepto)(function(e){"use strict";e.touchable=function(){return"ontouchstart"in window}(),e.getPos=function(t){var n,r;return e.touchable?t.targetTouches.length==1&&(r=t.targetTouches[0],n={x:r.x,y:r.y}):n={x:t.pageX,y:t.pageY},n};var t=document;e.elementFromPoint=function(e,n){var r=!1;return window.pageYOffset>0?r=t.elementFromPoint(0,window.pageYOffset+window.innerHeight-1)===null:window.pageXOffset>0&&(r=t.elementFromPoint(window.pageXOffset+window.innerWidth-1,0)===null),r?t.elementFromPoint(e-window.pageXOffset,n-window.pageYOffset):t.elementFromPoint(e,n)}})(Zepto);