(function(e){"use strict";function r(r){var i,s,o;return t||(o=e(this),i=o.offset(),s=parseInt(o.css("z-index"),10),o.css("z-index",s+1),o.data(i),n.revert&&!o.data("revert")&&o.data({rtop:i.top,rleft:i.left,revert:n.revert}),n.beforeDrag&&this.opts.beforeDrag.call(o),t=o),!1}function i(e){return t&&(t.css("z-index",1),n.afterDrag&&this.opts.afterDrag.call(t),e.el=t,t=null),!1}function s(e){if(t&&e.targetTouches.length>0){var n=e.targetTouches[0];u(n.pageX,n.pageY)}return!1}function o(e){return t&&u(e.pageX,e.pageY),!1}function u(e,n){var r=t.height(),i=t.width(),s=a(),o=e-i/s,u=n-r/s;t.css({left:o,top:u})}function a(){var e=t.data("width"),n=t.width();return e>n?2*e/n:2*n/e}var t,n;e.fn.draggable=function(t){n=t||{};var i=e.touchable?"touchstart":"mousedown";e(this).on(i,r)},e(function(){e.touchable?e(document).on({touchmove:s,touchend:i}):e(document).on({mousemove:o,mouseup:i})})})(Zepto),function(e){"use strict";function r(e,n){var r=t.offset();return e>=r.left&&e<=r.left+r.width&&n>=r.top&&n<=r.top+r.height}function i(e,t,n){r(t,n)?u(e,t,n):e.dragEl.data("revert")&&a(e.dragEl)}function s(e){if(e.dragEl&&e.changedTouches.length==1){var t=e.changedTouches[0];i(e,t.pageX,t.pageY)}return!1}function o(e){return e.dragEl&&i(e,e.pageX,e.pageY),!1}function u(r,i,s){var o=!0,u=r.dragEl;u.css({display:"none"});var f=e(document.elementFromPoint(i,s));u.css({display:"block"}),n.selector&&!f.hasClass(n.selector)&&(o=!1),o&&n.drop&&(o&=n.drop.call(t,r,u,e(f))),!o&&u.data("revert")&&a(u)}function a(n){var r=n.data("rleft"),i=n.data("rtop"),s=n.data("revert");e.isFunction(s)&&s.call(t),n.css({left:r,top:i})}var t,n;e.fn.droppable=function(e){n=e||{},t=this},e(function(){e.touchable?e(document).on("touchend",s):e(document).on("mouseup",o)})}(Zepto),function(e){function s(s,u){var a=s[i],f=a&&t[a];if(u===undefined)return f||o(s);if(f){if(u in f)return f[u];var l=r(u);if(l in f)return f[l]}return n.call(e(s),u)}function o(n,s,o){var a=n[i]||(n[i]=++e.uuid),f=t[a]||(t[a]=u(n));return s!==undefined&&(f[r(s)]=o),f}function u(t){var n={};return e.each(t.attributes,function(e,t){t.name.indexOf("data-")===0&&(n[r(t.name.replace("data-",""))]=t.value)}),n}var t={},n=e.fn.data,r=e.zepto.camelize,i=e.expando="Zepto"+ +(new Date);e.fn.data=function(t,n){return n===undefined?e.isPlainObject(t)?this.each(function(n,r){e.each(t,function(e,t){o(r,e,t)})}):this.length===0?undefined:s(this[0],t):this.each(function(){o(this,t,n)})},e.fn.removeData=function(n){return typeof n=="string"&&(n=n.split(/\s+/)),this.each(function(){var s=this[i],o=s&&t[s];o&&e.each(n,function(){delete o[r(this)]})})}}(Zepto)(function(e){"use strict";e.touchable=function(){return"ontouchstart"in window}()})(Zepto);